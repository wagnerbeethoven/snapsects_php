    <nav class="site-menu">
        <div class="container">
<ul>
                    <li class="active "><a href="index.php?lang={LANG}">[dic189]</a></li>
                </ul>

</div>
</nav>
<h1>{TITULO}</h1>
<main>
    <article>
        <div class="hgroup">
            <h2 id="school">[dic334]</h2>
            <h3></h3>
        </div>
        <div class="content page-school">
            <fieldset>
    <legend>
        <button title="[dic557]" class="exibir-informacao" type="button" data-toggle="collapse"
            data-target="#exibir-cursos" aria-expanded="true" aria-controls="exibir-cursos">
            <i class="fas fa-chevron-up"></i>
        </button>
        <h2 id="meus-cursos">[dic347]</h2>

        <button title="[dic346]" onclick="javascript:addsala();"><i class="fas fa-plus-circle"></i>[dic346]</button>
        <button title="[dic346]" onclick="javascript:delsala();"><i class="far fa-trash-alt"></i>[dic373]</button>
    </legend>
    <div class="collapsed" id="exibir-cursos">
        <section class="section-form">
            <div class="form-group">
                <p>[dic558]</p>
                <label for="audiodesc">[dic347]</label>
                <div class="input-container">
                   <select id="lstsalas" onchange="show(this.value);">
                        <!-- BEGIN BLOCK_SALAS -->
                        <option value="{SALA}">{SALA}</option>
                        <!-- END BLOCK_SALAS -->
                    </select>
                </div>
                <aside>
                </aside>
            </div>
        </section>
    </div>
</fieldset>
<fieldset>
    <legend>
        <button title="[dic559]" class="exibir-informacao" type="button" data-toggle="collapse"
            data-target="#exibir-atividades-sugeridas" aria-expanded="true" aria-controls="exibir-atividades-sugeridas">
            <i class="fas fa-chevron-up"></i>
        </button>
        <h2 id="atividades-sugeridas">[dic335]</h2>
        <button title="[dic351]" id="bt-add-atividade-sugerida" >
            <i class="fas fa-plus-circle"></i>
            [dic351]
        </button>
    </legend>

    <div class="collapse" id="exibir-atividades-sugeridas" style="display: none;">
        <table>
            <caption>[dic560] <strong id="strong-atividade-suge"></strong></caption>
            <thead>
                <tr>
                    <th scope="col" width="90%">[dic561]</th>
                    <th scope="col" width="10%" colspan="2" class="text-center">[dic562]</th>
                </tr>
            </thead>
            <tbody id="tbody-atividades">

            </tbody>
        </table>
    </div>
</fieldset>
            
<fieldset>
    <legend>
        <button title="[dic563]" class="exibir-informacao" type="button" data-toggle="collapse"
            data-target="#exibir-leituras-sugeridas" aria-expanded="true" aria-controls="exibir-leituras-sugeridas">
            <i class="fas fa-chevron-up"></i>
        </button>

        <h2 class="leituras-sugeridas">[dic336]</h2><button title="[dic352]" id="bt-add-leitura-sugerida"><i class="fas fa-plus-circle"></i>[dic352]</button>
    </legend>
    <div class="collapse" id="exibir-leituras-sugeridas" style="display: none;">
        <table>
            <caption>[dic564]</caption>
            <thead>
                <tr>
                    <th scope="col" width="90%">[dic565]</th>
                    <th scope="col" width="10%" class="text-center">[dic562]</th>
                </tr>
            </thead>
            <tbody id="tbody-leituras">

            </tbody>
        </table>
    </div>
</fieldset>
            
<fieldset>
    <legend>
        <button title="[dic566]" class="exibir-informacao" type="button"
            data-toggle="collapse" data-target="#exibir-aguardando-correcao" aria-expanded="true" aria-controls="exibir-aguardando-correcao">
            <i class="fas fa-chevron-up"></i>
        </button>

        <h2 id="atividades-aguardando-correcao">[dic386]</h2>
    </legend>

    <div class="collapse" id="exibir-aguardando-correcao" style="display: none;">
        
    </div>
</fieldset>
<fieldset>
    <legend>
        <button title="Exibir/ocultar atividades corrigidas" class="exibir-informacao" type="button" data-toggle="collapse"
            data-target="#exibir-atividades-corrigidas" aria-expanded="true" aria-controls="exibir-atividades-corrigidas">
            <i class="fas fa-chevron-up"></i>
        </button>

        <h2 id="atividades-corrigidas">[dic405]</h2>
    </legend>

    <div class="collapse" id="exibir-atividades-corrigidas" style="display: none;">
        
    </div>
</fieldset>
            


<fieldset>
    <legend>
        <button title="[dic567]" class="exibir-informacao" type="button" data-toggle="collapse"
            data-target="#alunos-inscritos" aria-expanded="true" aria-controls="alunos-inscritos">
            <i class="fas fa-chevron-up"></i>
        </button>
        <h2 class="alunos-inscritos">[dic381]</h2>
        <button title="Adicionar novo aluno" onclick="javascript:addconv();"><i class="fas fa-plus-circle"></i>[dic368]</button>
    </legend>
    <div class="collapse" id="alunos-inscritos" style="display: none;">
        <table>
            <caption>[dic568] <strong id='strong-alunos'></strong></caption>
            <thead>
                <tr>
                    <th scope="col" width="80%">[dic293]</th>
                    <th scope="col" width="10%" class="text-center">[dic562]</th>
                </tr>
            </thead>
            <tbody id="tbody-alunos">
                

            </tbody>
        </table>
    </div>
</fieldset>
            
            
<div id="dvpage">
<div id="menu">
</div>

<div id="dvshow">

</div>

</div>
<script type="text/javascript" src="js/spajax.js"></script>
<script type="text/javascript">

function showAtividadesSugeridas(atividades, v)
{
    var len = atividades.length;
    var tbody = document.getElementById('tbody-atividades');
    tbody.innerHTML = '';
    if(len > 0)
    {
        var div = document.getElementById('exibir-atividades-sugeridas');        
        var trs = '';
        for (var r=0;r<len;r++)
        {
var tc = (atividades[r].visible == true)?'[dic598]':'[dic599]';
            trs += '<tr>';
            trs += '<th scope="row"><a href="add_exerciceos.php?email={EMAIL}&id='+atividades[r].id+'&sala='+v+'" id="chk'+r+'" title="[dic569] \''+atividades[r].title+'\'">'+atividades[r].title+'</a></th>';
//            trs += '<td><button type="button" data-status="'+atividades[r].visible+'" onclick="javascript:setpublished(\''+atividades[r].id+"', '"+v+"', "+(atividades[r].visible == '0'?'true':'false')+',this);"'+' name="publicar" title="[dic570] \''+atividades[r].title+'\'"><i class="far '+(atividades[r].visible == '0'?'fa-circle':'fa-check-circle')+' "></i></button></td>';
            trs += '<td><button type="button" data-status="'+atividades[r].visible+'" onclick="javascript:setpublished(\''+atividades[r].id+"', '"+v+"', "+(atividades[r].visible == '0'?'true':'false')+',this);"'+' name="publicar" title="'+tc+' \''+atividades[r].title+'\'"><i class="far '+(atividades[r].visible == '0'?'fa-circle':'fa-check-circle')+' "></i></button></td>';
            trs += '<td><button type="button" name="remover" title="[dic571] \''+atividades[r].title+'\'" onclick="javascript:delquest('+"'"+atividades[r].id+"', '"+v+"');"+'"><i class="far fa-trash-alt"></i></button></td>';
            trs += '</tr>';
        }
        tbody.innerHTML = trs;
        div.style.display = '';
    }
} // da funcao...

function showLeituras(leituras, v)
{
    var len = leituras.length;
    var tbody = document.getElementById('tbody-leituras');
    tbody.innerHTML = '';
    if(len > 0)
    {
        var div = document.getElementById('exibir-leituras-sugeridas');        
        var trs = '';
        for (var r=0;r<len;r++)
        {
            trs += '<tr>';
            trs += '<th scope="row"><a href="add_leituras.php?email={EMAIL}&sala='+v+'&id='+leituras[r]+'" title="[dic572] \''+leituras[r]+'\'">'+leituras[r]+'</a></th>';
            trs += '<td><button type="button" name="remover" title="[dic573] \''+leituras[r]+'\'" onclick="javascript:delleitura('+"'"+leituras[r]+"', '"+v+"');"+'"><i class="far fa-trash-alt"></i></button></td>';
            trs += '</tr>';
        }
        tbody.innerHTML = trs;
        div.style.display = '';
    }
}

function corrigirAtividade(bt)
{
    window.location='correcao.php?email={EMAIL}&sala='+bt.dataset.sala+'&id='+bt.dataset.id+'&prova='+bt.dataset.prova;
}

function showCorrecoes(provas, v)
{
    var len = provas.length;
    var div = document.getElementById('exibir-aguardando-correcao');
    div.innerHTML = '';
    if(len > 0)
    {        
        var tables = '';
        
        for (var r=0;r<len;r++)
        {
// for (var rr=0;rr<provas[r].provas.length;rr++) {
            tables += '<table>';
            tables += '<caption>[dic561] <strong id="strong-correcao">'+provas[r].title+'</strong> [dic376]</caption>';
            tables += '<thead><tr><th scope="col" width="90%">[dic381]</th><th scope="col" width="10%" class="text-center">[dic562]</th> </tr> </thead>';
            tables += '<tbody id="tbody-correcao">';
            for (var rr=0;rr < provas[r].provas.length;rr++) 
            {
                tables += '<tr>';
                tables += '<th scope="row"><a title="[dic574] \''+provas[r].provas[rr].nome.replaceAll('_',' ')+' - '+provas[r].title+'\'" href="correcao.php?email={EMAIL}&sala='+document.getElementById('lstsalas').value+'&id='+provas[r].id+'&prova='+provas[r].provas[rr].aluno+'">'+provas[r].title+' - '+provas[r].provas[rr].nome.replaceAll('_',' ')+' - '+provas[r].provas[rr].aluno+'</a></th>';
                tables += '<td><button type="button" onclick="javascript:corrigirAtividade(this);" title="[dic574] \''+provas[r].provas[rr].nome.replaceAll('_',' ')+'\'" data-sala="'+document.getElementById('lstsalas').value+'" data-id="'+provas[r].id+'" data-prova="'+provas[r].provas[rr].aluno+'"><i class="fas fa-pen-nib"></i></button></td>';
                tables += '</tr>';
            }
            tables += '</tbody></table>';
        }
        div.innerHTML = tables;
        div.style.display = '';
    }
}

function showCorrigidas(provas, v)
{
    var len = provas.length;
    var div = document.getElementById('exibir-atividades-corrigidas');
    div.innerHTML = '';
    if(len > 0)
    {
        var tables = '';
        
        for (var r=0;r<len;r++)
        {
            tables += '<table>';
            tables += '<caption>[dic561] <strong id="strong-correcao">'+provas[r].title+'</strong> [dic376]</caption>';
            tables += '<thead><tr><th scope="col" width="90%">[dic381]</th><th scope="col" width="10%" class="text-center">[dic562]</th> </tr> </thead>';
            tables += '<tbody id="tbody-correcao">';
            for (var rr=0;rr < provas[r].corrigidas.length;rr++)
            {
                tables += '<tr>';
                tables += '<th scope="row"><a title="[dic574]'+provas[r].corrigidas[rr].nome+'" href="correcao.php?email={EMAIL}&sala='+document.getElementById('lstsalas').value+'&id='+provas[r].id+'&prova='+provas[r].corrigidas[rr].aluno+'">'+provas[r].corrigidas[rr].nota+' - '+provas[r].corrigidas[rr].nome.replaceAll('_',' ')+'</a></th>';
                tables += '<td><button type="button" onclick="javascript:corrigirAtividade(this);" title="[dic574] \''+provas[r].corrigidas[rr].nome+'\'" data-sala="'+document.getElementById('lstsalas').value+'" data-id="'+provas[r].id+'" data-prova="'+provas[r].corrigidas[rr].aluno+'"><i class="fas fa-pen-nib"></i></button></td>';
                tables += '</tr>';
            }
            tables += '</tbody></table>';
        }
        div.innerHTML = tables;
        div.style.display = '';
    }
}


function showAlunos(alunos)
{
    var len = alunos.length;
    var tbody = document.getElementById('tbody-alunos');
    var strong = document.getElementById('strong-alunos');
    
    strong.innerHTML = document.getElementById('lstsalas').value;    
    tbody.innerHTML = '';
    if(len > 0)
    {
        var div = document.getElementById('alunos-inscritos');        
        var trs = '';
        for (var r=0;r<len;r++)
        {
            trs += '<tr>';
            trs += (alunos[r].nome.length > 0)?'<th scope="row">'+alunos[r].nome+' - '+alunos[r].email+'</th>':'<th scope="row">'+alunos[r].email+' - ainda não se logou</th>';
            trs += '<td><button type="button" name="remover" title="[dic575] \''+alunos[r].nome+'\'" onclick="delconv('+"'"+alunos[r].email+"');"+'"><i class="far fa-trash-alt"></i></button></td>';
            trs += '</tr>';
        }
        tbody.innerHTML = trs;
        div.style.display = '';
    }
}


function show(v) {
var btAddAtividadeSugerida = document.getElementById('bt-add-atividade-sugerida');
btAddAtividadeSugerida.onclick = function()
{
    addexerciceos(v);
};

var btAddLeituraSugerida = document.getElementById('bt-add-leitura-sugerida');
btAddLeituraSugerida.onclick = function()
{
    addleituras(v);
};


var t='<table border="0" width="100%"><tr>';
t+='<td width="45%"><center>[dic381]</center>';

spjson(dic_path+'api_school.php','act=getshow&email={EMAIL}&sala='+v,'POST', function(res) {
// alert(JSON.stringify(res));
showAtividadesSugeridas(res.exerciceos,v);
showLeituras(res.leituras,v);
showCorrecoes(res.exerciceos,v);
showCorrigidas(res.exerciceos,v);
showAlunos(res.alunos,v);


var len = res.exerciceos.length;
if (len > 0) {
t+='<ul>';
for (var r=0;r<len;r++) {

t+='<li><input type="checkbox" id="chk'+r+'" onclick="javascript:setpublished('+"'"+res.exerciceos[r].id+"', '"+v+"', this.checked);"+'"';
t+=(res.exerciceos[r].visible == '0')?'>':' checked>';
t+=' <a href="#" onclick="javascript:window.location='+"'add_exerciceos.php?email={EMAIL}&id="+res.exerciceos[r].id+'&sala='+v+"';"+'">'+res.exerciceos[r].title+'</a>';
t+='<input type="button" value="[dic370]" onclick="javascript:delquest('+"'"+res.exerciceos[r].id+"', '"+v+"');"+'">';
t+='</li>';
} // do for...
t+='</ul>';
} // existem itens...
t+='<center><button id="cmdaddexerciceos" onclick="javascript:addexerciceos('+"'"+v+"'"+');">[dic351]</button></center>';
t+='</td><td width="45%"><center>[dic350]</center>';
var len=res.leituras.length;
if (len > 0) {
t+='<ul>';
for (var r=0;r<len;r++) {
t+='<li><a href="add_leituras.php?email={EMAIL}&sala='+v+'&id='+res.leituras[r]+'">'+res.leituras[r]+'</a>';
t+='<input type="button" value="[dic370]" onclick="javascript:delleitura('+"'"+res.leituras[r]+"', '"+v+"'"+');">';
t+='</li>';
} // do for...
t+='</ul>';
} // existem leituras...
t+='<center><button id="cmdaddleituras" onclick="javascript:addleituras('+"'"+v+"'"+');">[dic352]</button></center>';
t+='</td></tr></table>';
// agora as provas...
t+='<center><h2>[dic386]</h2></center>';
if (res.exerciceos.length > 0) {
for (var r=0;r<res.exerciceos.length;r++) {
t+='<center><h3>'+res.exerciceos[r].title+'</h3></center>';
t+='<ul>';
for (var rr=0;rr<res.exerciceos[r].provas.length;rr++) {
t+='<li><a href="correcao.php?email={EMAIL}&sala='+document.getElementById('lstsalas').value+'&id='+res.exerciceos[r].id+'&prova='+res.exerciceos[r].provas[rr].aluno+'">'+res.exerciceos[r].provas[rr].nome.replaceAll('_',' ')+' - '+res.exerciceos[r].provas[rr].aluno+'</a></li>';
} // do for rr
t+='</ul>';
} // do for...
} // existem provas...
// agora os exerciceos corrigidos
t+='<center><h2>[dic405]</h2></center>';
// alert(JSON.stringify(res.provas));
if (res.exerciceos.length > 0) {
for (var r=0;r<res.exerciceos.length;r++) {
t+='<center><h3>'+res.exerciceos[r].title+'</h3></center>';
t+='<ul>';
for (var rr=0;rr<res.exerciceos[r].corrigidas.length;rr++) {
t+='<li><a href="correcao.php?email={EMAIL}&sala='+document.getElementById('lstsalas').value+'&id='+res.exerciceos[r].id+'&prova='+res.exerciceos[r].corrigidas[rr].aluno+'">'+res.exerciceos[r].corrigidas[rr].nota+' - '+res.exerciceos[r].corrigidas[rr].nome+' - '+res.exerciceos[r].corrigidas[rr].aluno+'</a></li>';
} // do for rr
t+='</ul>';
} // do for...
} // existem provas...
t+='<center><h2>[dic381] ('+document.getElementById('lstsalas').value+')</h2></center>';
if (res.alunos.length > 0) {
t+='<ul>';
for (var r=0;r<res.alunos.length;r++) {
t+='<li>'+res.alunos[r].nome+' - '+res.alunos[r].email;
t+='<input type="button" onclick="delconv('+"'"+res.alunos[r].email+"'"+');" value="[dic370]">';
t+='</li>';
} // do for...
t+='</ul>';
} // existem alunos...
// document.getElementById('dvshow').innerHTML = t;
});
document.getElementById('cmddelsala').style.display='inline';
document.getElementById('cmdaddconv').style.display='inline';

} // da funcao...

function addsala() {
var px = prompt('[dic348]','');
// verificando caracteres estranhos...
px = px.replaceAll('&','');
px = px.replaceAll('/','');
px = px.replaceAll('\\','');
px = px.replaceAll('-','');
px = px.replaceAll('?','');
px = px.replaceAll('=','');
px = px.replaceAll('*','');
px = px.replaceAll('.','');
px = px.replaceAll('|','');
px = px.replaceAll('_',' ');
px = px.trim();
if (px.length > 0) {
spopen(dic_path+'api_school.php','act=addsala&email={EMAIL}&sala='+px,'POST', function(res) {
window.location='school.php?email={EMAIL}';
});
}
} // da funcao...

function delsala() {
var v = document.getElementById('lstsalas').value;
if (window.confirm('[dic374]')) {
spopen(dic_path+'api_school.php','act=delsala&email={EMAIL}&sala='+v,'POST', function(res) {
window.location='school.php?email={EMAIL}';
});
} // removendo...
} // da funcao...

function addexerciceos(x) {
window.location='add_exerciceos.php?email={EMAIL}&id=0&sala='+x;
} // da funcao

function delquest(i, s) {
if (confirm('[dic369]')) {
spopen(dic_path+'api_school.php','act=delquest&email={EMAIL}&sala='+s+'&id='+i,'POST', function(res) {
show(s);
});
} // removendo...
} // da funcao...

function setpublished(i, s, v, c) {
    if(c !== undefined)
    {
        v = c.dataset.status == 1 ? false : true;
    }

var x =(v == true)?1:0;
spopen(dic_path+'api_school.php','act=setindex&email={EMAIL}&sala='+s+'&id='+i+'&value='+x,'POST', function(res) {
if(c !== undefined)
{
    c.innerHTML = '<i class="far '+(!v?'fa-circle':'fa-check-circle')+' "></i>';
    c.dataset.status = v ? 1 : 0;
c.title = (v == true)?'[dic598]':'[dic599]';
}

});
} // da funcao...

function addleituras(x) {
window.location='add_leituras.php?email={EMAIL}&sala='+x+'&id=';
} // da funcao...

function addconv() {
var input1 = window.prompt('[dic383]');
if (input1.length > 0) {
// verificando caracteres estranhos...
var px = input1;
px = px.replaceAll('&','');
px = px.replaceAll('/','');
px = px.replaceAll('\\','');
px = px.replaceAll('?','');
px = px.replaceAll('=','');
px = px.replaceAll('*','');
px = px.replaceAll('|','');
px = px.trim();

spjson(dic_path+'api_school.php','act=addconv&email={EMAIL}&aluno='+px+'&sala='+document.getElementById('lstsalas').value,'POST', function(res) {
if (res.status == 'ok') {
alert('[dic384]');
show(document.getElementById('lstsalas').value);
} // esta ok...
else { alert('[dic385]'); }
});
} // envia o convite...
} // da funcao...

function delleitura(i,s) {
if(confirm('[dic377]')) {
spopen(dic_path+'api_school.php','act=delleitura&email={EMAIL}&sala='+s+'&id='+i,'POST', function(rr) {
show(s);
}); // removendo...
} // ok...
} // da funcao...

function delconv(a) {
var s = document.getElementById('lstsalas').value;
if (confirm('[dic382]')) {
spopen(dic_path+'api_school.php','act=delconv&email={EMAIL}&sala='+s+'&aluno='+a,'POST', function(res) {
show(s);
});
} // pode remover...
} // da funcao...

window.onload = function() {
show(document.getElementById('lstsalas').value);
} // da funcao.
</script>

        </div>
    </article>
</main>
<script src="SITE_URLjs/anchor.min.js"></script>
<script>
    anchors.options = {
  placement: 'left',
  visible: 'always',
  icon: '#'
};
    anchors.add('.hgroup h2');
</script>

